{"ast":null,"code":"import React,{useState,useContext}from\"react\";import axios from'axios';import{useNavigate}from\"react-router-dom\";import\"../components/login.css\";import'bootstrap/dist/css/bootstrap.min.css';import loginImg from\"../components/login.svg\";import{AuthContext}from'../components/AuthContext';import{Button,Form,FormGroup,Label,Input,Card,CardImg,Alert}from\"reactstrap\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[credentials,setCredentials]=useState(\"\");const{login}=useContext(AuthContext);const[showAlert,setShowAlert]=useState(false);const[loading,setLoading]=useState(false);const navigate=useNavigate();const handleChange=e=>{setCredentials(e.target.value);};const handleSubmit=async event=>{event.preventDefault();setLoading(true);try{//https://localhost:7116/api/controller/login?gstNo=GST_12345\nconst response=await axios.post('http://localhost:7116/api/controller/login?gstNo='+credentials,{//username: inputUsername,\n// password: inputPassword\n});if(response.status===200){login(response.data.token);// Set token in Authorization header for all subsequent requests\naxios.defaults.headers.common['Authorization']=\"Bearer \".concat(response.data.token);navigate('/dashboard');console.log('User logged in successfully');}else{// Handle login failure\nalert('GST number is Invalid');console.log('Login failed');//setShowAlert(true);\n}}catch(error){//alert('GST no invalid!!');\nconsole.error('Error:',error);//setShowAlert(true);\n}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"background\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"row app-des\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"col left-background \",children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:\"white\"},children:\"Invoice\"}),/*#__PURE__*/_jsx(\"h4\",{style:{color:\"white\"},children:\"Management\"}),/*#__PURE__*/_jsx(CardImg,{className:\"mobile-img\",src:loginImg,alt:\"mobile-App\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"col login-form\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-weight-bold mb-4\",children:\"Login\"}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{className:\"font-weight-bold mb-2\",children:\"Enter GST Number\"}),/*#__PURE__*/_jsx(Input,{className:\"mb-3\",type:\"text\"// placeholder=\"GST No\" onChange={(e) => setInputUsername(e.target.value)} required\n,placeholder:\"GST No\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"mt-3  btn_all\",children:loading?'Logging In...':'Log In'}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center m-4\",children:[\"Do not have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"SignUp\"})]})]})})]})})})});}export default Login;","map":{"version":3,"names":["React","useState","useContext","axios","useNavigate","loginImg","AuthContext","Button","Form","FormGroup","Label","Input","Card","CardImg","Alert","jsx","_jsx","jsxs","_jsxs","Login","credentials","setCredentials","login","showAlert","setShowAlert","loading","setLoading","navigate","handleChange","e","target","value","handleSubmit","event","preventDefault","response","post","status","data","token","defaults","headers","common","concat","console","log","alert","error","className","children","class","style","color","src","alt","onSubmit","type","placeholder","onChange","required","href"],"sources":["C:/DigitalWave/InvoiceMgmt_UI-main/src/components/login.js"],"sourcesContent":["import React, { useState,useContext  } from \"react\";\nimport axios from 'axios';\nimport { useNavigate } from \"react-router-dom\";\nimport \"../components/login.css\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport loginImg from \"../components/login.svg\";\nimport { AuthContext } from '../components/AuthContext';\nimport {\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n  Card,\n  CardImg,\n  Alert\n} from \"reactstrap\";\n\nfunction Login() {\n\n\n\n  const [credentials, setCredentials] = useState(\"\");\n  const { login } = useContext(AuthContext);\n  const [showAlert, setShowAlert] = useState(false)\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    setCredentials(e.target.value);\n  };\n\n  const handleSubmit = async (event) => {\n\n    event.preventDefault();\n    setLoading(true);\n\n    try {\n\n      //https://localhost:7116/api/controller/login?gstNo=GST_12345\n      const response = await axios.post('http://localhost:7116/api/controller/login?gstNo='+credentials, {\n        //username: inputUsername,\n        // password: inputPassword\n      \n      });\n\n    if (response.status === 200) {\n      login(response.data.token);\n       // Set token in Authorization header for all subsequent requests\n      axios.defaults.headers.common['Authorization'] = `Bearer ${response.data.token}`;\n\n     navigate('/dashboard');\n      console.log('User logged in successfully');\n    } else {\n      // Handle login failure\n      alert('GST number is Invalid');\n      console.log('Login failed');\n      //setShowAlert(true);\n    }\n    } catch (error) {\n      //alert('GST no invalid!!');\n      console.error('Error:', error);\n      //setShowAlert(true);\n    } finally {\n      setLoading(false);\n    }\n\n    \n  };\n\n  return (\n    <div className=\"background\">\n      <div className=\"login-box\">\n        <div className=\"container\">\n          <div class=\"row app-des\">\n            <div class=\"col left-background \">\n              <h1 style={{color:\"white\"}}>Invoice</h1>\n              <h4  style={{color:\"white\"}}>Management</h4>\n              <CardImg\n                className=\"mobile-img\"\n                src={loginImg}\n                alt=\"mobile-App\"\n              />\n            </div>\n            <div class=\"col login-form\">\n              <Form onSubmit={handleSubmit}>\n                <h2 className=\"font-weight-bold mb-4\">Login</h2>\n                <FormGroup>\n                  <Label className=\"font-weight-bold mb-2\">Enter GST Number</Label>\n                  <Input\n                    className=\"mb-3\"\n                    type=\"text\"\n                    // placeholder=\"GST No\" onChange={(e) => setInputUsername(e.target.value)} required\n                    placeholder=\"GST No\" onChange={handleChange} required\n\n                    \n                  />\n                </FormGroup>\n                <Button type=\"submit\" className=\"mt-3  btn_all\" >\n                  {loading ? 'Logging In...' : 'Log In'}\n                </Button>\n                <div className=\"text-center m-4\">Do not have an account? <a href=\"/register\">SignUp</a></div>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}