{"ast":null,"code":"import React,{useState,useContext}from\"react\";import axios from'axios';import{useNavigate}from\"react-router-dom\";import\"../components/login.css\";import'bootstrap/dist/css/bootstrap.min.css';import loginImg from\"../components/login.svg\";import{AuthContext}from'../components/AuthContext';import{Button,Form,FormGroup,Label,Input,Card,CardImg,Alert}from\"reactstrap\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[credentials,setCredentials]=useState(\"\");const{login}=useContext(AuthContext);const[showAlert,setShowAlert]=useState(false);const[loading,setLoading]=useState(false);const navigate=useNavigate();const handleChange=e=>{setCredentials(e.target.value);};const handleSubmit=async event=>{event.preventDefault();setLoading(true);try{//https://localhost:7116/api/controller/login?gstNo=GST_12345\nconst response=await axios.post('https://localhost:7116/api/controller/login?gstNo='+credentials,{//username: inputUsername,\n// password: inputPassword\n});if(response.status===200){login(response.data.token);// Set token in Authorization header for all subsequent requests\naxios.defaults.headers.common['Authorization']=\"Bearer \".concat(response.data.token);navigate('/dashboard');console.log('User logged in successfully');}else{// Handle login failure\nconsole.log('Login failed');//setShowAlert(true);\n}}catch(error){console.error('Error:',error);//setShowAlert(true);\n}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"background\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"row app-des\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"col left-background \",children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:\"white\"},children:\"Invoice\"}),/*#__PURE__*/_jsx(\"h4\",{style:{color:\"white\"},children:\"Management\"}),/*#__PURE__*/_jsx(CardImg,{className:\"mobile-img\",src:loginImg,alt:\"mobile-App\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"col login-form\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-weight-bold mb-4\",children:\"Login\"}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{className:\"font-weight-bold mb-2\",children:\"Enter GST Number\"}),/*#__PURE__*/_jsx(Input,{className:\"mb-3\",type:\"text\"// placeholder=\"GST No\" onChange={(e) => setInputUsername(e.target.value)} required\n,placeholder:\"GST No\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"mt-3  btn_all\",children:loading?'Logging In...':'Log In'}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center m-4\",children:[\"Do not have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"SignUp\"})]})]})})]})})})});}export default Login;","map":{"version":3,"names":["React","useState","useContext","axios","useNavigate","loginImg","AuthContext","Button","Form","FormGroup","Label","Input","Card","CardImg","Alert","jsx","_jsx","jsxs","_jsxs","Login","credentials","setCredentials","login","showAlert","setShowAlert","loading","setLoading","navigate","handleChange","e","target","value","handleSubmit","event","preventDefault","response","post","status","data","token","defaults","headers","common","concat","console","log","error","className","children","class","style","color","src","alt","onSubmit","type","placeholder","onChange","required","href"],"sources":["C:/InvoiceMgmt_UI/invoicemgmt/src/components/login.js"],"sourcesContent":["import React, { useState,useContext  } from \"react\";\r\nimport axios from 'axios';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../components/login.css\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport loginImg from \"../components/login.svg\";\r\nimport { AuthContext } from '../components/AuthContext';\r\nimport {\r\n  Button,\r\n  Form,\r\n  FormGroup,\r\n  Label,\r\n  Input,\r\n  Card,\r\n  CardImg,\r\n  Alert\r\n} from \"reactstrap\";\r\n\r\nfunction Login() {\r\n\r\n\r\n\r\n  const [credentials, setCredentials] = useState(\"\");\r\n  const { login } = useContext(AuthContext);\r\n\r\n  const [showAlert, setShowAlert] = useState(false)\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    setCredentials(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n\r\n    event.preventDefault();\r\n    setLoading(true);\r\n\r\n\r\n    try {\r\n\r\n      //https://localhost:7116/api/controller/login?gstNo=GST_12345\r\n      const response = await axios.post('https://localhost:7116/api/controller/login?gstNo='+credentials, {\r\n        //username: inputUsername,\r\n        // password: inputPassword\r\n      \r\n      });\r\n\r\n    if (response.status === 200) {\r\n      login(response.data.token);\r\n       // Set token in Authorization header for all subsequent requests\r\n      axios.defaults.headers.common['Authorization'] = `Bearer ${response.data.token}`;\r\n\r\n     navigate('/dashboard');\r\n      console.log('User logged in successfully');\r\n    } else {\r\n      // Handle login failure\r\n      console.log('Login failed');\r\n      //setShowAlert(true);\r\n    }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      //setShowAlert(true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n\r\n    \r\n  };\r\n\r\n  return (\r\n    <div className=\"background\">\r\n      <div className=\"login-box\">\r\n        <div className=\"container\">\r\n          <div class=\"row app-des\">\r\n            <div class=\"col left-background \">\r\n              <h1 style={{color:\"white\"}}>Invoice</h1>\r\n              <h4  style={{color:\"white\"}}>Management</h4>\r\n              <CardImg\r\n                className=\"mobile-img\"\r\n                src={loginImg}\r\n                alt=\"mobile-App\"\r\n              />\r\n            </div>\r\n            <div class=\"col login-form\">\r\n              <Form onSubmit={handleSubmit}>\r\n                <h2 className=\"font-weight-bold mb-4\">Login</h2>\r\n                <FormGroup>\r\n                  <Label className=\"font-weight-bold mb-2\">Enter GST Number</Label>\r\n                  <Input\r\n                    className=\"mb-3\"\r\n                    type=\"text\"\r\n                    // placeholder=\"GST No\" onChange={(e) => setInputUsername(e.target.value)} required\r\n                    placeholder=\"GST No\" onChange={handleChange} required\r\n\r\n                    \r\n                  />\r\n                </FormGroup>\r\n                <Button type=\"submit\" className=\"mt-3  btn_all\" >\r\n                  {loading ? 'Logging In...' : 'Log In'}\r\n                </Button>\r\n                <div className=\"text-center m-4\">Do not have an account? <a href=\"/register\">SignUp</a></div>\r\n              </Form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}